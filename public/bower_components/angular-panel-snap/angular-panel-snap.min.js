!function(){"use strict";angular.module("akreitals.panel-snap",[])}(),function(){"use strict";function e(e,n){return{restrict:"EA",template:'<ul class="ak-menu"><li ng-repeat="panel in panels" ng-class="{active: panel.active}" ng-click="select(panel.id)"><a href>{{panel.name}}</a></li></ul>',scope:{"for":"@"},link:function(t){return angular.isDefined(t["for"])?(t.panels=[],e.$on("panelsnap:addedPanel",function(e,n){if(t["for"]===n.group){e.stopPropagation();var a={id:n.id,name:n.name,active:!1};t.panels.push(a)}}),e.$on("panelsnap:activatePanel",function(e,n){t["for"]===n.group&&(e.stopPropagation(),angular.forEach(t.panels,function(e){e.active=!1}),t.panels[n.id].active=!0)}),void(t.select=function(n){e.$emit("panelsnap:selectPanel",{group:t["for"],id:n})})):void n.error("PanelGroupMenu: no 'for' attribute provided")}}}angular.module("akreitals.panel-snap").directive("akPanelGroupMenu",e),e.$inject=["$rootScope","$log"]}(),function(){"use strict";function e(){return{restrict:"EA",replace:!0,controller:"PanelGroupController",scope:{name:"@",speed:"=",threshold:"=",fullWindow:"=",keyboard:"=",prevKey:"=",nextKey:"="},link:function(e){e.init()}}}function n(e,n,t,a,r,l,o){function i(){m.eventContainer.on("mousewheel scroll touchmove",s),angular.element(a).on("resize",u),e.keyboard&&angular.element(a).on("keydown",c)}function c(e){if(m.enabled)if(m.isSnapping){if(e.which===m.prevKey||e.which===m.nextKey)return e.preventDefault(),!1}else switch(e.which){case m.prevKey:e.preventDefault(),f(m.currentPanel-1);break;case m.nextKey:e.preventDefault(),f(m.currentPanel+1)}}function s(e){var n=50;r.cancel(v),v=r(function(){p(e)},n)}function u(){var e=150;r.cancel(h),h=r(function(){m.scrollInterval=isNaN(m.container[0].innerHeight)?m.container[0].clientHeight:m.container[0].innerHeight,m.enabled&&f(m.currentPanel)},e)}function p(e){if(e.stopPropagation(),!m.isSnapping){var n,t=m.snapContainer.scrollTop();if(!m.enabled)return n=Math.max(0,Math.min(Math.round(t/m.scrollInterval),m.panels.length-1)),void(n!==m.currentPanel&&d(n));var a=t-m.scrollOffset,r=m.container[0].scrollHeight-m.scrollInterval;n=a<-m.threshold&&a>-m.scrollInterval?Math.floor(t/m.scrollInterval):a>m.threshold&&a<m.scrollInterval?Math.ceil(t/m.scrollInterval):Math.round(t/m.scrollInterval),n=Math.max(0,Math.min(n,m.panels.length-1)),0===a||(0>=t||t>=r?(d(n),m.scrollOffset=0>=t?0:r):f(n))}}function f(n){if(!(isNaN(n)||0>n||n>=m.panels.length)){m.isSnapping=!0,o.$broadcast("panelsnap:start",{group:e.name}),m.panels[m.currentPanel].onLeave();var t=m.scrollInterval*n;m.snapContainer.scrollTo(0,t,m.speed).then(function(){m.scrollOffset=t,m.isSnapping=!1,o.$broadcast("panelsnap:finish",{group:e.name}),m.panels[n].onEnter(),d(n)})}}function d(n){!m.panels||m.panels.length<1||(angular.forEach(m.panels,function(e){e.setActive(!1)}),m.panels[n].setActive(!0),m.currentPanel=n,o.$broadcast("panelsnap:activate",{group:e.name}),o.$emit("panelsnap:activatePanel",{group:e.name,id:n}))}var h,v,m=this;m.panels=[],m.currentPanel=0,m.scrollInterval=0,m.scrollOffset=0,m.isSnapping=!1,m.enabled=!0,m.speed=400,m.threshold=50,m.prevKey=38,m.nextKey=40,m.addPanel=function(n){var t=angular.isDefined(n.name)?n.name:"Panel "+(m.panels.length+1);m.panels.push(n),angular.isDefined(e.name)&&o.$emit("panelsnap:addedPanel",{group:e.name,name:t,id:m.panels.length-1})},m.enableSnap=function(){m.enabled=!0},m.disableSnap=function(){m.enabled=!1},m.toggleSnap=function(){m.enabled=!m.enabled},e.init=function(){m.container=n,m.eventContainer=m.container,m.snapContainer=m.container,e.fullWindow&&(m.container=angular.element(l[0].documentElement),m.eventContainer=m.snapContainer=l),m.scrollInterval=isNaN(m.container[0].innerHeight)?m.container[0].clientHeight:m.container[0].innerHeight,m.speed=angular.isDefined(e.speed)?e.speed:m.speed,m.threshold=angular.isDefined(e.threshold)?e.threshold:m.threshold,m.prevKey=angular.isDefined(e.prevKey)?e.prevKey:m.prevKey,m.nextKey=angular.isDefined(e.nextKey)?e.nextKey:m.nextKey,i(),d(m.currentPanel)},o.$on("panelsnap:selectPanel",function(n,t){e.name===t.group&&(n.stopPropagation(),f(t.id))})}angular.module("akreitals.panel-snap").directive("akPanelGroup",e).controller("PanelGroupController",n),n.$inject=["$scope","$element","$attrs","$window","$timeout","$document","$rootScope"]}(),function(){"use strict";function e(){return{restrict:"EA",require:"^akPanelGroup",replace:!0,transclude:!0,scope:{name:"@",onEnter:"&",onLeave:"&"},template:'<div class="ak-panel" ng-class="{active: active}" ng-transclude></div>',link:function(e,n,t,a){a.addPanel(e),n.css({width:"100%",height:"100%",position:"relative",overflow:"hidden"}),e.enableSnap=a.enableSnap,e.disableSnap=a.disableSnap,e.toggleSnap=a.toggleSnap,e.active=!1,e.setActive=function(n){e.active=n}}}}angular.module("akreitals.panel-snap").directive("akPanel",e)}(),function(){"use strict";function e(e){return.5>e?Math.pow(2*e,2)/2:1-Math.pow(2*(1-e),2)/2}function n(e,n,t,a,r){var l=angular.element.prototype,o=function(e){return"undefined"!=typeof HTMLDocument&&e instanceof HTMLDocument||e.nodeType&&e.nodeType===e.DOCUMENT_NODE},i=function(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement||e.nodeType&&e.nodeType===e.ELEMENT_NODE},c=function(e){return i(e)||o(e)?e:e[0]};l.scrollTo=function(n,t,a){var r;if(angular.isElement(n)?r=this.scrollToElement:a&&(r=this.scrollToAnimated),r)return r.apply(this,arguments);var l=c(this);return o(l)?e.scrollTo(n,t):(l.scrollLeft=n,void(l.scrollTop=t))},l.scrollToAnimated=function(e,l,o,i){var c,s;o&&!i&&(i=r);var u=this.scrollLeft(),p=this.scrollTop(),f=Math.round(e-u),d=Math.round(l-p),h=null,v=this,m="scroll mousedown mousewheel touchmove keydown",g=function(e){(!e||e.which>0)&&(v.unbind(m,g),t(c),s.reject(),c=null)};if(c&&g(),s=n.defer(),!f&&!d)return s.resolve(),s.promise;var y=function(e){null===h&&(h=e);var n=e-h,t=n>=o?1:i(n/o);v.scrollTo(u+Math.ceil(f*t),p+Math.ceil(d*t)),1>t?c=a(y):(v.unbind(m,g),c=null,s.resolve())};return v.scrollTo(u,p),c=a(y),s.promise},l.scrollToElement=function(e,n,t,a){var r=c(this),l=this.scrollTop()+c(e).getBoundingClientRect().top-(n||0);return i(r)&&(l-=r.getBoundingClientRect().top),this.scrollTo(0,l,t,a)};var s={scrollLeft:function(n,t,a){if(angular.isNumber(n))return this.scrollTo(n,this.scrollTop(),t,a);var r=c(this);return o(r)?e.scrollX||document.documentElement.scrollLeft||document.body.scrollLeft:r.scrollLeft},scrollTop:function(n,t,a){if(angular.isNumber(n))return this.scrollTo(this.scrollTop(),n,t,a);var r=c(this);return o(r)?e.scrollY||document.documentElement.scrollTop||document.body.scrollTop:r.scrollTop}},u=function(e,n){return function(t,a){return a?n.apply(this,arguments):e.apply(this,arguments)}};for(var p in s)l[p]=l[p]?u(l[p],s[p]):s[p]}function t(e){var n=["webkit","moz","o","ms"];return function(t,a){if(e[t])return e[t];for(var r,l=t.substr(0,1).toUpperCase()+t.substr(1),o=0;o<n.length;o++)if(r=n[o]+l,e[r])return e[r];return a}}function a(e,n){var t=0,a=function(e){var a=(new Date).getTime(),r=Math.max(0,16-(a-t)),l=n(function(){e(a+r)},r);return t=a+r,l};return e("requestAnimationFrame",a)}function r(e,n){var t=function(e){n.cancel(e)};return e("cancelAnimationFrame",t)}angular.module("akreitals.panel-snap").value("scrollEasing",e).run(n).factory("polyfill",t).factory("requestAnimation",a).factory("cancelAnimation",r),n.$inject=["$window","$q","cancelAnimation","requestAnimation","scrollEasing"],t.$inject=["$window"],a.$inject=["polyfill","$timeout"],r.$inject=["polyfill","$timeout"]}();
//# sourceMappingURL=angular-panel-snap.min.js.map